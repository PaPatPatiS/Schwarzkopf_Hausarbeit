<!DOCTYPE html>
<html lang="de" xml:lang="de">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Ergebnisse | PM2.5 Zeitreihenanalyse von den deutschen Landeshauptstädten</title>
  <meta name="description" content="5 Ergebnisse | PM2.5 Zeitreihenanalyse von den deutschen Landeshauptstädten im Jahr 2023" />
  <meta name="generator" content="bookdown 0.38 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Ergebnisse | PM2.5 Zeitreihenanalyse von den deutschen Landeshauptstädten" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="5 Ergebnisse | PM2.5 Zeitreihenanalyse von den deutschen Landeshauptstädten im Jahr 2023" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Ergebnisse | PM2.5 Zeitreihenanalyse von den deutschen Landeshauptstädten" />
  
  <meta name="twitter:description" content="5 Ergebnisse | PM2.5 Zeitreihenanalyse von den deutschen Landeshauptstädten im Jahr 2023" />
  

<meta name="author" content="Patricia Schwarzkopf" />


<meta name="date" content="2024-03-31" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="analyse.html"/>
<link rel="next" href="diskussion-und-reflektion.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Pm2,5</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> index</a></li>
<li class="chapter" data-level="2" data-path="einleitung.html"><a href="einleitung.html"><i class="fa fa-check"></i><b>2</b> Einleitung</a>
<ul>
<li class="chapter" data-level="2.1" data-path="einleitung.html"><a href="einleitung.html#hypothese-und-forschungsfrage"><i class="fa fa-check"></i><b>2.1</b> Hypothese und Forschungsfrage</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="methodik.html"><a href="methodik.html"><i class="fa fa-check"></i><b>3</b> Methodik</a>
<ul>
<li class="chapter" data-level="3.1" data-path="methodik.html"><a href="methodik.html#datenbeschaffung"><i class="fa fa-check"></i><b>3.1</b> Datenbeschaffung</a></li>
<li class="chapter" data-level="3.2" data-path="methodik.html"><a href="methodik.html#packages-und-working-directory"><i class="fa fa-check"></i><b>3.2</b> Packages und Working Directory</a></li>
<li class="chapter" data-level="3.3" data-path="methodik.html"><a href="methodik.html#datenbereinigung"><i class="fa fa-check"></i><b>3.3</b> Datenbereinigung</a></li>
<li class="chapter" data-level="3.4" data-path="methodik.html"><a href="methodik.html#datenüberprüfung-auf-vollständigkeit"><i class="fa fa-check"></i><b>3.4</b> Datenüberprüfung auf Vollständigkeit</a></li>
<li class="chapter" data-level="3.5" data-path="methodik.html"><a href="methodik.html#ermittlung-der-häufigsten-messzeiten-und-auswahl-des-analysezeitraums"><i class="fa fa-check"></i><b>3.5</b> Ermittlung der häufigsten Messzeiten und Auswahl des Analysezeitraums</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="analyse.html"><a href="analyse.html"><i class="fa fa-check"></i><b>4</b> Analyse</a>
<ul>
<li class="chapter" data-level="4.1" data-path="analyse.html"><a href="analyse.html#vorbereitung-der-datenimputation"><i class="fa fa-check"></i><b>4.1</b> Vorbereitung der Datenimputation</a></li>
<li class="chapter" data-level="4.2" data-path="analyse.html"><a href="analyse.html#datenimputation-und-analyse"><i class="fa fa-check"></i><b>4.2</b> Datenimputation und Analyse</a></li>
<li class="chapter" data-level="4.3" data-path="analyse.html"><a href="analyse.html#imputationverfahren"><i class="fa fa-check"></i><b>4.3</b> Imputationverfahren</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ergebnisse.html"><a href="ergebnisse.html"><i class="fa fa-check"></i><b>5</b> Ergebnisse</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ergebnisse.html"><a href="ergebnisse.html#geografische-darstellung-der-daten"><i class="fa fa-check"></i><b>5.1</b> Geografische Darstellung der Daten</a></li>
<li class="chapter" data-level="5.2" data-path="ergebnisse.html"><a href="ergebnisse.html#clusteranalyse-der-städte"><i class="fa fa-check"></i><b>5.2</b> Clusteranalyse der Städte</a></li>
<li class="chapter" data-level="5.3" data-path="ergebnisse.html"><a href="ergebnisse.html#saisonale-analyse"><i class="fa fa-check"></i><b>5.3</b> Saisonale Analyse</a></li>
<li class="chapter" data-level="5.4" data-path="ergebnisse.html"><a href="ergebnisse.html#schwellenwertüberschreitung"><i class="fa fa-check"></i><b>5.4</b> Schwellenwertüberschreitung</a></li>
<li class="chapter" data-level="5.5" data-path="ergebnisse.html"><a href="ergebnisse.html#detailanalyse"><i class="fa fa-check"></i><b>5.5</b> Detailanalyse</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="diskussion-und-reflektion.html"><a href="diskussion-und-reflektion.html"><i class="fa fa-check"></i><b>6</b> Diskussion und Reflektion</a></li>
<li class="chapter" data-level="7" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>7</b> References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">PM2.5 Zeitreihenanalyse von den deutschen Landeshauptstädten</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ergebnisse" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">5</span> Ergebnisse<a href="ergebnisse.html#ergebnisse" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Im folgenden Kapitel werden die Ergebnisse der Analyse zur Luftqualität präsentiert. Aufgrund der interaktiven Darstellung einiger Analysen in Form von Shiny-Anwendungen und interaktiven Karten können diese in diesem Dokument nicht direkt dargestellt werden.</p>
<div id="geografische-darstellung-der-daten" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Geografische Darstellung der Daten<a href="ergebnisse.html#geografische-darstellung-der-daten" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Zunächst wird das Shapefile von Deutschland heruntergeladen und in das geographische Koordinatensystem WGS 84 (EPSG:4326) transformiert, um es mit anderen geographischen Daten zu vereinheitlichen. Anschließend werden die interpolierten Daten (midnight_interpoliert) in ein sf-Objekt konvertiert und zusammen mit dem Shapefile von Deutschland mithilfe von ggplot2 in einer Heatmap visualisiert.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="ergebnisse.html#cb63-1" tabindex="-1"></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb63-2"><a href="ergebnisse.html#cb63-2" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> germany_shapefile, <span class="at">fill =</span> <span class="st">&quot;grey90&quot;</span>, <span class="at">color =</span> <span class="st">&quot;grey60&quot;</span>) <span class="sc">+</span>  </span>
<span id="cb63-3"><a href="ergebnisse.html#cb63-3" tabindex="-1"></a>  <span class="fu">geom_sf</span>(<span class="at">data =</span> midnight_sf, <span class="fu">aes</span>(<span class="at">color =</span> value_midnight), <span class="at">size =</span> <span class="dv">3</span>, <span class="at">alpha =</span> <span class="fl">0.6</span>) <span class="sc">+</span></span>
<span id="cb63-4"><a href="ergebnisse.html#cb63-4" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">&quot;blue&quot;</span>, <span class="at">high =</span> <span class="st">&quot;brown&quot;</span>, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">25</span>)) <span class="sc">+</span></span>
<span id="cb63-5"><a href="ergebnisse.html#cb63-5" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Heatmap der PM2.5-Werte in Deutschland&quot;</span>, <span class="at">x =</span> <span class="st">&quot;Längengrad&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Breitengrad&quot;</span>, <span class="at">color =</span> <span class="st">&quot;PM2.5&quot;</span>) <span class="sc">+</span></span>
<span id="cb63-6"><a href="ergebnisse.html#cb63-6" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb63-7"><a href="ergebnisse.html#cb63-7" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/heatmap-visualization-1.png" width="672" />
Die Heatmap zeigt eine Darstellung Deutschlands, wobei die Standorte der Messstationen durch Punkte markiert sind. Die Farbgebung spiegelt die PM<sub>2,5</sub>-Konzentrationen wider, die von Blau für niedrige Werte bis zu Braun für hohe Werte reichen. Diese Farbskala ermöglicht eine intuitive Beurteilung der Luftqualität in verschiedenen Regionen. Es werden die Daten vom 01.05.2023 dargestellt, welche durch die erste Messung jeder Stadt repräsentiert werden.</p>
</div>
<div id="clusteranalyse-der-städte" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Clusteranalyse der Städte<a href="ergebnisse.html#clusteranalyse-der-städte" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Zunächst wird in diesem Code aus einem Datensatz eine Liste aller Städte erstellt. Anschließend wird für jede Stadt der durchschnittliche PM<sub>2,5</sub>-Wert sowohl für den Sommer (Mai und Juni) als auch für den Winter (November und Dezember) berechnet. Diese Durchschnittswerte werden in zwei separaten Listen gespeichert, eine für den Sommer und eine für den Winter, um später analysiert zu werden. Diese Daten bilden die Grundlage für die anschließende Clusteranalyse. Um die optimale Anzahl an Clustern zu bestimmen, wird eine Methode wie die Elbow-Methode angewendet.</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="ergebnisse.html#cb64-1" tabindex="-1"></a><span class="co">#Berechnung  der durchschnittlichen PM2.5-Werte für jede Stadt</span></span>
<span id="cb64-2"><a href="ergebnisse.html#cb64-2" tabindex="-1"></a></span>
<span id="cb64-3"><a href="ergebnisse.html#cb64-3" tabindex="-1"></a><span class="co"># Saisonale Analyse der Daten</span></span>
<span id="cb64-4"><a href="ergebnisse.html#cb64-4" tabindex="-1"></a>cities_names <span class="ot">&lt;-</span> <span class="fu">unique</span>(midnight_interpoliert<span class="sc">$</span>location_name)</span>
<span id="cb64-5"><a href="ergebnisse.html#cb64-5" tabindex="-1"></a></span>
<span id="cb64-6"><a href="ergebnisse.html#cb64-6" tabindex="-1"></a><span class="co"># Funktion zur Berechnung der durchschnittlichen PM2.5-Werte</span></span>
<span id="cb64-7"><a href="ergebnisse.html#cb64-7" tabindex="-1"></a>calculate_avg_pm25 <span class="ot">&lt;-</span> <span class="cf">function</span>(city, season_data) {</span>
<span id="cb64-8"><a href="ergebnisse.html#cb64-8" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">nrow</span>(season_data) <span class="sc">&gt;</span> <span class="dv">0</span>) {</span>
<span id="cb64-9"><a href="ergebnisse.html#cb64-9" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">mean</span>(season_data<span class="sc">$</span>value_midnight, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb64-10"><a href="ergebnisse.html#cb64-10" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb64-11"><a href="ergebnisse.html#cb64-11" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NA</span>)  </span>
<span id="cb64-12"><a href="ergebnisse.html#cb64-12" tabindex="-1"></a>  }</span>
<span id="cb64-13"><a href="ergebnisse.html#cb64-13" tabindex="-1"></a>}</span>
<span id="cb64-14"><a href="ergebnisse.html#cb64-14" tabindex="-1"></a></span>
<span id="cb64-15"><a href="ergebnisse.html#cb64-15" tabindex="-1"></a><span class="co"># Erstellen der Listen für Sommer- und Winterdaten</span></span>
<span id="cb64-16"><a href="ergebnisse.html#cb64-16" tabindex="-1"></a>summer_data_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb64-17"><a href="ergebnisse.html#cb64-17" tabindex="-1"></a>winter_data_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb64-18"><a href="ergebnisse.html#cb64-18" tabindex="-1"></a></span>
<span id="cb64-19"><a href="ergebnisse.html#cb64-19" tabindex="-1"></a><span class="co"># Befüllen der Listen mit Daten</span></span>
<span id="cb64-20"><a href="ergebnisse.html#cb64-20" tabindex="-1"></a><span class="cf">for</span> (city <span class="cf">in</span> cities_names) {</span>
<span id="cb64-21"><a href="ergebnisse.html#cb64-21" tabindex="-1"></a>  summer_data <span class="ot">&lt;-</span> midnight_interpoliert <span class="sc">%&gt;%</span></span>
<span id="cb64-22"><a href="ergebnisse.html#cb64-22" tabindex="-1"></a>    <span class="fu">filter</span>(location_name <span class="sc">==</span> city, <span class="fu">month</span>(date) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>))</span>
<span id="cb64-23"><a href="ergebnisse.html#cb64-23" tabindex="-1"></a>  </span>
<span id="cb64-24"><a href="ergebnisse.html#cb64-24" tabindex="-1"></a>  winter_data <span class="ot">&lt;-</span> midnight_interpoliert <span class="sc">%&gt;%</span></span>
<span id="cb64-25"><a href="ergebnisse.html#cb64-25" tabindex="-1"></a>    <span class="fu">filter</span>(location_name <span class="sc">==</span> city, <span class="fu">month</span>(date) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">12</span>))</span>
<span id="cb64-26"><a href="ergebnisse.html#cb64-26" tabindex="-1"></a>  </span>
<span id="cb64-27"><a href="ergebnisse.html#cb64-27" tabindex="-1"></a>  summer_data_list[[city]] <span class="ot">&lt;-</span> summer_data</span>
<span id="cb64-28"><a href="ergebnisse.html#cb64-28" tabindex="-1"></a>  winter_data_list[[city]] <span class="ot">&lt;-</span> winter_data</span>
<span id="cb64-29"><a href="ergebnisse.html#cb64-29" tabindex="-1"></a>}</span>
<span id="cb64-30"><a href="ergebnisse.html#cb64-30" tabindex="-1"></a></span>
<span id="cb64-31"><a href="ergebnisse.html#cb64-31" tabindex="-1"></a></span>
<span id="cb64-32"><a href="ergebnisse.html#cb64-32" tabindex="-1"></a><span class="co"># Berechnung der durchschnittlichen PM2.5-Werte für jede Stadt für Sommer und Winter</span></span>
<span id="cb64-33"><a href="ergebnisse.html#cb64-33" tabindex="-1"></a>avg_pm25_summer <span class="ot">&lt;-</span> <span class="fu">sapply</span>(cities_names, <span class="cf">function</span>(city) <span class="fu">calculate_avg_pm25</span>(city, summer_data_list[[city]]))</span>
<span id="cb64-34"><a href="ergebnisse.html#cb64-34" tabindex="-1"></a>avg_pm25_winter <span class="ot">&lt;-</span> <span class="fu">sapply</span>(cities_names, <span class="cf">function</span>(city) <span class="fu">calculate_avg_pm25</span>(city, winter_data_list[[city]]))</span>
<span id="cb64-35"><a href="ergebnisse.html#cb64-35" tabindex="-1"></a></span>
<span id="cb64-36"><a href="ergebnisse.html#cb64-36" tabindex="-1"></a><span class="co"># Erstellung von Dataframes ohne Skalierung der Daten</span></span>
<span id="cb64-37"><a href="ergebnisse.html#cb64-37" tabindex="-1"></a>summer_df_unscaled <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">city =</span> cities_names, <span class="at">avg_pm25 =</span> avg_pm25_summer)</span>
<span id="cb64-38"><a href="ergebnisse.html#cb64-38" tabindex="-1"></a>winter_df_unscaled <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">city =</span> cities_names, <span class="at">avg_pm25 =</span> avg_pm25_winter)</span></code></pre></div>
<p>In der k-Means-Clusteranalyse wurden die Städte auf Basis ihrer durchschnittlichen PM<sub>2,5</sub>-Werte während der Sommer- und Wintermonate in vier Gruppen eingeteilt, um eine differenzierte Betrachtung der Luftqualitätsmuster zu ermöglichen.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="ergebnisse.html#cb65-1" tabindex="-1"></a><span class="co"># Durchführung der k-Means Cluster-Analyse ohne Skalierung</span></span>
<span id="cb65-2"><a href="ergebnisse.html#cb65-2" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb65-3"><a href="ergebnisse.html#cb65-3" tabindex="-1"></a>kmeans_summer_unscaled <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(summer_df_unscaled<span class="sc">$</span>avg_pm25, <span class="at">centers =</span> <span class="dv">4</span>)</span>
<span id="cb65-4"><a href="ergebnisse.html#cb65-4" tabindex="-1"></a>summer_df_unscaled<span class="sc">$</span>cluster <span class="ot">&lt;-</span> kmeans_summer_unscaled<span class="sc">$</span>cluster</span>
<span id="cb65-5"><a href="ergebnisse.html#cb65-5" tabindex="-1"></a></span>
<span id="cb65-6"><a href="ergebnisse.html#cb65-6" tabindex="-1"></a>kmeans_winter_unscaled <span class="ot">&lt;-</span> <span class="fu">kmeans</span>(winter_df_unscaled<span class="sc">$</span>avg_pm25, <span class="at">centers =</span> <span class="dv">4</span>)</span>
<span id="cb65-7"><a href="ergebnisse.html#cb65-7" tabindex="-1"></a>winter_df_unscaled<span class="sc">$</span>cluster <span class="ot">&lt;-</span> kmeans_winter_unscaled<span class="sc">$</span>cluster</span></code></pre></div>
<p>Die Visualisierung der Clusterergebnisse ermöglicht eine detaillierte Analyse der städtischen Luftqualität. Die Balkendiagramme zeigen die durchschnittlichen PM<sub>2,5</sub>-Werte jeder Stadt im Sommer und Winter, gruppiert nach den ermittelten Clustern.</p>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="ergebnisse.html#cb66-1" tabindex="-1"></a><span class="co"># Visualisierung der Cluster für Sommer mit einer farbenblindenfreundlichen Palette</span></span>
<span id="cb66-2"><a href="ergebnisse.html#cb66-2" tabindex="-1"></a><span class="fu">ggplot</span>(summer_df_unscaled, <span class="fu">aes</span>(<span class="at">x =</span> city, <span class="at">y =</span> avg_pm25, <span class="at">fill =</span> <span class="fu">factor</span>(cluster))) <span class="sc">+</span></span>
<span id="cb66-3"><a href="ergebnisse.html#cb66-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb66-4"><a href="ergebnisse.html#cb66-4" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb66-5"><a href="ergebnisse.html#cb66-5" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">65</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb66-6"><a href="ergebnisse.html#cb66-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Stadt&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Durchschnittliche PM2.5 (Sommer)&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Cluster&quot;</span>) <span class="sc">+</span></span>
<span id="cb66-7"><a href="ergebnisse.html#cb66-7" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Cluster-Analyse der PM2.5-Werte in Städten (Sommer)&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-16-1.png" width="672" /></p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="ergebnisse.html#cb67-1" tabindex="-1"></a><span class="co"># Visualisierung der Cluster für Winter mit einer farbenblindenfreundlichen Palette</span></span>
<span id="cb67-2"><a href="ergebnisse.html#cb67-2" tabindex="-1"></a><span class="fu">ggplot</span>(winter_df_unscaled, <span class="fu">aes</span>(<span class="at">x =</span> city, <span class="at">y =</span> avg_pm25, <span class="at">fill =</span> <span class="fu">factor</span>(cluster))) <span class="sc">+</span></span>
<span id="cb67-3"><a href="ergebnisse.html#cb67-3" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">&quot;identity&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-4"><a href="ergebnisse.html#cb67-4" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">&quot;Dark2&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-5"><a href="ergebnisse.html#cb67-5" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">65</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb67-6"><a href="ergebnisse.html#cb67-6" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&quot;Stadt&quot;</span>, <span class="at">y =</span> <span class="st">&quot;Durchschnittliche PM2.5 (Winter)&quot;</span>, <span class="at">fill =</span> <span class="st">&quot;Cluster&quot;</span>) <span class="sc">+</span></span>
<span id="cb67-7"><a href="ergebnisse.html#cb67-7" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Cluster-Analyse der PM2.5-Werte in Städten (Winter)&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-16-2.png" width="672" />
Das Sommer-Diagramm zeigt eine relativ gleichmäßige Verteilung der PM<sub>2,5</sub>-Werte über die Städte hinweg. Gleiche Cluster haben dabei die selbe Farbe. Dies deutet darauf hin, dass es im Sommer ein ähnliches Niveau der Luftverschmutzung über diese städtischen Gebiete hinweg gibt, mit geringfügigen Variationen, die möglicherweise durch lokale Faktoren beeinflusst werden.
Das Winter-Diagramm zeigt eine deutlichere Variation der PM<sub>2,5</sub>-Werte zwischen den Städten, was auf stärkere saisonale Einflüsse hinweist, die die Luftqualität im Winter beeinflussen könnten. Besonders auffällig sind die PM<sub>2,5</sub>-Durchschnittswerte von Rostock, die deutlich höher sind als die anderen Städte. Dies könnte auf eine Reihe von Faktoren zurückzuführen sein, wie zum Beispiel erhöhtes Heizungsverhalten oder Wetterbedingungen.</p>
</div>
<div id="saisonale-analyse" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Saisonale Analyse<a href="ergebnisse.html#saisonale-analyse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Mithilfe der Leaflet-Bibliothek wurde eine interaktive Karte erstellt, die die PM<sub>2,5</sub>-Durchschnittswerte für Sommer und Winter für alle 16 Städte visualisiert. Durch Anklicken der Marker können detaillierte Informationen zu den durchschnittlichen PM<sub>2,5</sub>-Werten jeder Stadt für die Sommer- und Wintermonate abgerufen werden. Diese Visualisierungsmethode ermöglicht es den Lesern, geografische Muster und Unterschiede in der Luftqualität einfach und interaktiv zu erkennen.</p>
<p>Es wird ein Dataframe mit dem Namen PM<sub>2,5</sub>_durchschnitt erstellt, welcher die durchschnittlichen PM<sub>2,5</sub>-Konzentrationen für Sommer und Winter in verschiedenen Städten enthält. Zunächst werden die Städtenamen festgelegt und mit einer sapply-Funktion die PM<sub>2,5</sub>-Mittelwerte für Sommer und Winter berechnet. Anschließend werden die Städtenamen als Zeilenüberschriften gesetzt, um die Lesbarkeit der Tabelle zu verbessern, und die ursprüngliche Stadtspalte wird entfernt.</p>
<p>Anschließend wird für jede Stadt bestimmt, ob die Sommer- oder Winterwerte höher sind (Dominante_Saison). Dies geschieht durch den Vergleich der Sommer- und Wintermittelwerte. Zusätzlich wird die prozentuale Änderung zwischen Sommer- und Winterwerten berechnet, um die Saisonalität und Variabilität der PM<sub>2,5</sub>-Konzentrationen aufzuzeigen.</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="ergebnisse.html#cb68-1" tabindex="-1"></a><span class="co"># Erstellen des Dataframes mit den Durchschnittswerten</span></span>
<span id="cb68-2"><a href="ergebnisse.html#cb68-2" tabindex="-1"></a></span>
<span id="cb68-3"><a href="ergebnisse.html#cb68-3" tabindex="-1"></a>Pm2<span class="fl">.5</span>_durchschnitt <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb68-4"><a href="ergebnisse.html#cb68-4" tabindex="-1"></a>  <span class="at">Stadt =</span> cities_names,</span>
<span id="cb68-5"><a href="ergebnisse.html#cb68-5" tabindex="-1"></a>  <span class="at">Durchschnitt_Sommer =</span> <span class="fu">sapply</span>(cities_names, <span class="cf">function</span>(city) {</span>
<span id="cb68-6"><a href="ergebnisse.html#cb68-6" tabindex="-1"></a>    <span class="fu">calculate_avg_pm25</span>(city, summer_data_list[[city]])</span>
<span id="cb68-7"><a href="ergebnisse.html#cb68-7" tabindex="-1"></a>  }),</span>
<span id="cb68-8"><a href="ergebnisse.html#cb68-8" tabindex="-1"></a>  <span class="at">Durchschnitt_Winter =</span> <span class="fu">sapply</span>(cities_names, <span class="cf">function</span>(city) {</span>
<span id="cb68-9"><a href="ergebnisse.html#cb68-9" tabindex="-1"></a>    <span class="fu">calculate_avg_pm25</span>(city, winter_data_list[[city]])</span>
<span id="cb68-10"><a href="ergebnisse.html#cb68-10" tabindex="-1"></a>  })</span>
<span id="cb68-11"><a href="ergebnisse.html#cb68-11" tabindex="-1"></a>)</span>
<span id="cb68-12"><a href="ergebnisse.html#cb68-12" tabindex="-1"></a></span>
<span id="cb68-13"><a href="ergebnisse.html#cb68-13" tabindex="-1"></a><span class="co"># Setzen der Stadtnamen als Zeilenbezeichnungen (Row Names)</span></span>
<span id="cb68-14"><a href="ergebnisse.html#cb68-14" tabindex="-1"></a><span class="fu">rownames</span>(Pm2<span class="fl">.5</span>_durchschnitt) <span class="ot">&lt;-</span> Pm2<span class="fl">.5</span>_durchschnitt<span class="sc">$</span>Stadt</span>
<span id="cb68-15"><a href="ergebnisse.html#cb68-15" tabindex="-1"></a>Pm2<span class="fl">.5</span>_durchschnitt<span class="sc">$</span>Stadt <span class="ot">&lt;-</span> <span class="cn">NULL</span></span>
<span id="cb68-16"><a href="ergebnisse.html#cb68-16" tabindex="-1"></a></span>
<span id="cb68-17"><a href="ergebnisse.html#cb68-17" tabindex="-1"></a><span class="co"># Umbenennen der Spalte &quot;Prozentuale_Aenderung&quot; in &quot;%_Aenderung&quot;</span></span>
<span id="cb68-18"><a href="ergebnisse.html#cb68-18" tabindex="-1"></a><span class="fu">names</span>(Pm2<span class="fl">.5</span>_durchschnitt)[<span class="fu">which</span>(<span class="fu">names</span>(Pm2<span class="fl">.5</span>_durchschnitt) <span class="sc">==</span> <span class="st">&quot;Prozentuale_Aenderung&quot;</span>)] <span class="ot">&lt;-</span> <span class="st">&quot;%_Aenderung&quot;</span></span>
<span id="cb68-19"><a href="ergebnisse.html#cb68-19" tabindex="-1"></a><span class="fu">names</span>(Pm2<span class="fl">.5</span>_durchschnitt)[<span class="fu">which</span>(<span class="fu">names</span>(Pm2<span class="fl">.5</span>_durchschnitt) <span class="sc">==</span> <span class="st">&quot;Durchschnitt_Sommer&quot;</span>)] <span class="ot">&lt;-</span> <span class="st">&quot;Sommer&quot;</span></span>
<span id="cb68-20"><a href="ergebnisse.html#cb68-20" tabindex="-1"></a><span class="fu">names</span>(Pm2<span class="fl">.5</span>_durchschnitt)[<span class="fu">which</span>(<span class="fu">names</span>(Pm2<span class="fl">.5</span>_durchschnitt) <span class="sc">==</span> <span class="st">&quot;Durchschnitt_Winter&quot;</span>)] <span class="ot">&lt;-</span> <span class="st">&quot;Winter&quot;</span></span>
<span id="cb68-21"><a href="ergebnisse.html#cb68-21" tabindex="-1"></a></span>
<span id="cb68-22"><a href="ergebnisse.html#cb68-22" tabindex="-1"></a><span class="co"># Hinzufügen der Spalten für dominante Saison und prozentuale Änderung</span></span>
<span id="cb68-23"><a href="ergebnisse.html#cb68-23" tabindex="-1"></a>Pm2<span class="fl">.5</span>_durchschnitt<span class="sc">$</span>Dominante_Saison <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(</span>
<span id="cb68-24"><a href="ergebnisse.html#cb68-24" tabindex="-1"></a>  Pm2<span class="fl">.5</span>_durchschnitt<span class="sc">$</span>Sommer <span class="sc">&gt;</span> Pm2<span class="fl">.5</span>_durchschnitt<span class="sc">$</span>Winter, </span>
<span id="cb68-25"><a href="ergebnisse.html#cb68-25" tabindex="-1"></a>  <span class="st">&quot;Sommer&quot;</span>, </span>
<span id="cb68-26"><a href="ergebnisse.html#cb68-26" tabindex="-1"></a>  <span class="st">&quot;Winter&quot;</span></span>
<span id="cb68-27"><a href="ergebnisse.html#cb68-27" tabindex="-1"></a>)</span>
<span id="cb68-28"><a href="ergebnisse.html#cb68-28" tabindex="-1"></a></span>
<span id="cb68-29"><a href="ergebnisse.html#cb68-29" tabindex="-1"></a><span class="co"># Berechnung der prozentualen Änderung und Hinzufügen als Spalte</span></span>
<span id="cb68-30"><a href="ergebnisse.html#cb68-30" tabindex="-1"></a>Pm2<span class="fl">.5</span>_durchschnitt<span class="sc">$</span><span class="st">`</span><span class="at">%_Aenderung</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="fu">with</span>(Pm2<span class="fl">.5</span>_durchschnitt, {</span>
<span id="cb68-31"><a href="ergebnisse.html#cb68-31" tabindex="-1"></a>  (Sommer <span class="sc">-</span> Winter) <span class="sc">/</span> Sommer <span class="sc">*</span> <span class="dv">100</span></span>
<span id="cb68-32"><a href="ergebnisse.html#cb68-32" tabindex="-1"></a>})</span>
<span id="cb68-33"><a href="ergebnisse.html#cb68-33" tabindex="-1"></a></span>
<span id="cb68-34"><a href="ergebnisse.html#cb68-34" tabindex="-1"></a></span>
<span id="cb68-35"><a href="ergebnisse.html#cb68-35" tabindex="-1"></a><span class="co"># Anzeigen der finalen Tabelle</span></span>
<span id="cb68-36"><a href="ergebnisse.html#cb68-36" tabindex="-1"></a><span class="fu">print</span>(Pm2<span class="fl">.5</span>_durchschnitt)</span></code></pre></div>
<pre><code>##                Sommer    Winter Dominante_Saison %_Aenderung
## Berlin      11.554098  9.768852           Sommer   15.451192
## Bremen      12.602459  6.976230           Sommer   44.643902
## Dresden     10.972951  5.613934           Sommer   48.838425
## Düsseldorf  10.139344  8.926230           Sommer   11.964430
## Erfurt       9.211475  5.050820           Sommer   45.168179
## Hamburg      8.540984  8.737705           Winter   -2.303263
## Hannover     8.737705  6.642459           Sommer   23.979362
## Kiel         9.927869  8.245902           Sommer   16.941876
## Magdeburg   11.257377  7.498361           Sommer   33.391583
## Mainz        9.093443  7.322131           Sommer   19.478998
## München     11.054098  7.035410           Sommer   36.354738
## Potsdam      9.934426  7.540984           Sommer   24.092409
## Saarbrücken 10.034426  8.216393           Sommer   18.117955
## Rostock     10.552459 14.927869           Winter  -41.463415
## Stuttgart    9.934426  6.950820           Sommer   30.033003
## Wiesbaden    8.719672  7.608197           Sommer   12.746757</code></pre>
<p>Die Analyse der PM<sub>2,5</sub>-Durchschnittswerte zeigt signifikante saisonale Unterschiede in den gemessenen Konzentrationen über verschiedene Städte hinweg. In den meisten Städten, wie Berlin, Bremen, Dresden und Erfurt, sind die PM<sub>2,5</sub>-Werte im Sommer deutlich höher als im Winter. Dies deutet darauf hin, dass die Sommermonate eine größere Belastung durch Feinstaub aufweisen. Besonders auffällig ist die hohe prozentuale Änderung in Städten wie Dresden mit fast 49% höheren Werten im Sommer. Keiner der Durchschnittswerte liegt unter dem Grenzwert von 5 µg/m³ der WHO.
Interessanterweise zeigen die Daten für Hamburg und Rostock ein gegenteiliges Muster, mit höheren PM<sub>2,5</sub>-Konzentrationen im Winter. Rostock sticht hier mit einer negativen prozentualen Änderung von über 41% hervor, was auf eine erhebliche Zunahme der Feinstaubbelastung in den Wintermonaten hinweist.
Diese saisonalen Schwankungen könnten auf eine Vielzahl von Umwelt- und anthropogenen Faktoren zurückzuführen sein. Dazu gehören unterschiedliche Heizgewohnheiten, Verkehrsaufkommen und meteorologische Bedingungen.</p>
</div>
<div id="schwellenwertüberschreitung" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Schwellenwertüberschreitung<a href="ergebnisse.html#schwellenwertüberschreitung" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Die Grenzwerte der WHO und EU werden als Variablen festgelegt. Der Grenzwert der WHO liegt bei 5 µg/m³ <span class="citation">(<a href="#ref-frankeAssessingWHO2021Air2023">Franke, Lange, und Kiendler-Scharr 2023</a>)</span>, während der Grenzwert der EU bei 25 µg/m³ liegt <span class="citation">(<a href="#ref-Richtlinie2008502008"><span>„<span>Richtlinie 2008/50/EG des Europ<span>ä</span>ischen Parlaments und des Rates vom 21. Mai 2008 <span>ü</span>ber Luftqualit<span>ä</span>t und saubere Luft f<span>ü</span>r Europa</span>“</span> 2008</a>)</span>.</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="ergebnisse.html#cb70-1" tabindex="-1"></a>Grenzwert_WHO <span class="ot">&lt;-</span> <span class="dv">5</span> </span>
<span id="cb70-2"><a href="ergebnisse.html#cb70-2" tabindex="-1"></a></span>
<span id="cb70-3"><a href="ergebnisse.html#cb70-3" tabindex="-1"></a>Grenzwert_EU <span class="ot">&lt;-</span> <span class="dv">25</span> </span></code></pre></div>
<p>Für jede Stadt wird ermittelt, wie viele Tage die PM<sub>2,5</sub>-Werte die jeweiligen Grenzwerte überschritten haben.</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="ergebnisse.html#cb71-1" tabindex="-1"></a><span class="co"># Zählen, wie oft die Werte in jeder Stadt über den Schwellenwerten liegen</span></span>
<span id="cb71-2"><a href="ergebnisse.html#cb71-2" tabindex="-1"></a>Grenzwertüberschreitung <span class="ot">&lt;-</span> midnight_interpoliert <span class="sc">%&gt;%</span></span>
<span id="cb71-3"><a href="ergebnisse.html#cb71-3" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">above_WHO =</span> value_midnight <span class="sc">&gt;</span> Grenzwert_WHO,</span>
<span id="cb71-4"><a href="ergebnisse.html#cb71-4" tabindex="-1"></a>         <span class="at">above_EU =</span> value_midnight <span class="sc">&gt;</span> Grenzwert_EU) <span class="sc">%&gt;%</span></span>
<span id="cb71-5"><a href="ergebnisse.html#cb71-5" tabindex="-1"></a>  <span class="fu">group_by</span>(location_name) <span class="sc">%&gt;%</span></span>
<span id="cb71-6"><a href="ergebnisse.html#cb71-6" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Tage_ueber_WHO =</span> <span class="fu">sum</span>(above_WHO, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb71-7"><a href="ergebnisse.html#cb71-7" tabindex="-1"></a>            <span class="at">Tage_ueber_EU =</span> <span class="fu">sum</span>(above_EU, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<p>Die Gesamtanzahl der Tage für jede Stadt wird berechnet, um die prozentuale Überschreitung der Grenzwerte zu ermitteln.</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="ergebnisse.html#cb72-1" tabindex="-1"></a><span class="co"># Berechnung der Gesamtanzahl der Tage für jede Stadt</span></span>
<span id="cb72-2"><a href="ergebnisse.html#cb72-2" tabindex="-1"></a>total_days_per_city <span class="ot">&lt;-</span> midnight_interpoliert <span class="sc">%&gt;%</span></span>
<span id="cb72-3"><a href="ergebnisse.html#cb72-3" tabindex="-1"></a>  <span class="fu">group_by</span>(location_name) <span class="sc">%&gt;%</span></span>
<span id="cb72-4"><a href="ergebnisse.html#cb72-4" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">total_days =</span> <span class="fu">n</span>())  </span>
<span id="cb72-5"><a href="ergebnisse.html#cb72-5" tabindex="-1"></a></span>
<span id="cb72-6"><a href="ergebnisse.html#cb72-6" tabindex="-1"></a><span class="co"># Berechnung der Überschreitungstage</span></span>
<span id="cb72-7"><a href="ergebnisse.html#cb72-7" tabindex="-1"></a>Grenzwertueberschreitung_prozentual <span class="ot">&lt;-</span> midnight_interpoliert <span class="sc">%&gt;%</span></span>
<span id="cb72-8"><a href="ergebnisse.html#cb72-8" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">above_WHO =</span> value_midnight <span class="sc">&gt;</span> Grenzwert_WHO,</span>
<span id="cb72-9"><a href="ergebnisse.html#cb72-9" tabindex="-1"></a>         <span class="at">above_EU =</span> value_midnight <span class="sc">&gt;</span> Grenzwert_EU) <span class="sc">%&gt;%</span></span>
<span id="cb72-10"><a href="ergebnisse.html#cb72-10" tabindex="-1"></a>  <span class="fu">group_by</span>(location_name) <span class="sc">%&gt;%</span></span>
<span id="cb72-11"><a href="ergebnisse.html#cb72-11" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">Tage_ueber_WHO =</span> <span class="fu">sum</span>(above_WHO, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb72-12"><a href="ergebnisse.html#cb72-12" tabindex="-1"></a>            <span class="at">Tage_ueber_EU =</span> <span class="fu">sum</span>(above_EU, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb72-13"><a href="ergebnisse.html#cb72-13" tabindex="-1"></a>  <span class="fu">left_join</span>(total_days_per_city, <span class="at">by =</span> <span class="st">&quot;location_name&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb72-14"><a href="ergebnisse.html#cb72-14" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Prozent_WHO =</span> (Tage_ueber_WHO <span class="sc">/</span> total_days) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb72-15"><a href="ergebnisse.html#cb72-15" tabindex="-1"></a>         <span class="at">Prozent_EU =</span> (Tage_ueber_EU <span class="sc">/</span> total_days) <span class="sc">*</span> <span class="dv">100</span>)</span>
<span id="cb72-16"><a href="ergebnisse.html#cb72-16" tabindex="-1"></a></span>
<span id="cb72-17"><a href="ergebnisse.html#cb72-17" tabindex="-1"></a><span class="co"># Ergebnis anzeigen</span></span>
<span id="cb72-18"><a href="ergebnisse.html#cb72-18" tabindex="-1"></a><span class="fu">print</span>(Grenzwertueberschreitung_prozentual)</span></code></pre></div>
<pre><code>## # A tibble: 16 × 6
##    location_name Tage_ueber_WHO Tage_ueber_EU total_days Prozent_WHO Prozent_EU
##    &lt;chr&gt;                  &lt;int&gt;         &lt;int&gt;      &lt;int&gt;       &lt;dbl&gt;      &lt;dbl&gt;
##  1 Berlin                   105             4        122        86.1      3.28 
##  2 Bremen                    89             4        122        73.0      3.28 
##  3 Dresden                   80             1        122        65.6      0.820
##  4 Düsseldorf                92             2        122        75.4      1.64 
##  5 Erfurt                    78             0        122        63.9      0    
##  6 Hamburg                   92             2        122        75.4      1.64 
##  7 Hannover                  80             0        122        65.6      0    
##  8 Kiel                      79             2        122        64.8      1.64 
##  9 Magdeburg                 91             1        122        74.6      0.820
## 10 Mainz                     83             2        122        68.0      1.64 
## 11 München                   90             2        122        73.8      1.64 
## 12 Potsdam                   84             2        122        68.9      1.64 
## 13 Rostock                  112             6        122        91.8      4.92 
## 14 Saarbrücken               89             2        122        73.0      1.64 
## 15 Stuttgart                 72             1        122        59.0      0.820
## 16 Wiesbaden                 85             3        122        69.7      2.46</code></pre>
<p>Die Analyse der Grenzwertüberschreitungen von PM<sub>2,5</sub> zeigt, dass Städte wie Rostock, Berlin und Düsseldorf vergleichsweise hohe Überschreitungsquoten des WHO-Grenzwertes aufweisen. Rostock führt dabei mit 91,8% aller gemessenen Tage. Dies liegt daran, dass der WHO-Grenzwert deutlich niedriger ist.</p>
<p>In dieser Analyse wird untersucht, ob eine Korrelation zwischen der Einwohnerzahl der Städte und der Anzahl der Tage mit PM<sub>2,5</sub>-Grenzwertüberschreitungen (gemäß WHO-Grenzwert) besteht. Dazu werden die Überschreitungsdaten mit den Einwohnerzahlen der jeweiligen Städte korreliert. Anschließend wird die Pearson-Korrelationsanalyse durchgeführt, um die Stärke und Richtung des linearen Zusammenhangs zwischen diesen beiden Variablen zu bestimmen.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="ergebnisse.html#cb74-1" tabindex="-1"></a><span class="co"># Korrelation zwischen Größe der Stadt und Überschreitung der PM2,5 Werte</span></span>
<span id="cb74-2"><a href="ergebnisse.html#cb74-2" tabindex="-1"></a></span>
<span id="cb74-3"><a href="ergebnisse.html#cb74-3" tabindex="-1"></a>einwohner <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">&quot;C:/Users/Patti/Documents/Studium/Master Uni Freiburg/WS 23- 24/Geodatenverabreitung/Projekt neu/einwohner.xlsx&quot;</span>)</span>
<span id="cb74-4"><a href="ergebnisse.html#cb74-4" tabindex="-1"></a></span>
<span id="cb74-5"><a href="ergebnisse.html#cb74-5" tabindex="-1"></a>Grenzwertüberschreitung_mit_Einwohner <span class="ot">&lt;-</span> Grenzwertüberschreitung <span class="sc">%&gt;%</span></span>
<span id="cb74-6"><a href="ergebnisse.html#cb74-6" tabindex="-1"></a>  <span class="fu">left_join</span>(einwohner, <span class="at">by =</span> <span class="st">&quot;location_name&quot;</span>)</span>
<span id="cb74-7"><a href="ergebnisse.html#cb74-7" tabindex="-1"></a></span>
<span id="cb74-8"><a href="ergebnisse.html#cb74-8" tabindex="-1"></a><span class="co"># Korrelation zwischen Einwohnerzahl und Anzahl der Tage mit WHO-Grenzwertüberschreitung berechnen</span></span>
<span id="cb74-9"><a href="ergebnisse.html#cb74-9" tabindex="-1"></a>korrelationsanalyse <span class="ot">&lt;-</span> <span class="fu">cor.test</span>(Grenzwertüberschreitung_mit_Einwohner<span class="sc">$</span>Tage_ueber_WHO, Grenzwertüberschreitung_mit_Einwohner<span class="sc">$</span>population, <span class="at">method =</span> <span class="st">&quot;pearson&quot;</span>)</span>
<span id="cb74-10"><a href="ergebnisse.html#cb74-10" tabindex="-1"></a></span>
<span id="cb74-11"><a href="ergebnisse.html#cb74-11" tabindex="-1"></a><span class="co"># Ergebnis anzeigen</span></span>
<span id="cb74-12"><a href="ergebnisse.html#cb74-12" tabindex="-1"></a><span class="fu">print</span>(korrelationsanalyse)</span></code></pre></div>
<pre><code>## 
##  Pearson&#39;s product-moment correlation
## 
## data:  Grenzwertüberschreitung_mit_Einwohner$Tage_ueber_WHO and Grenzwertüberschreitung_mit_Einwohner$population
## t = 1.8326, df = 14, p-value = 0.08821
## alternative hypothesis: true correlation is not equal to 0
## 95 percent confidence interval:
##  -0.07141508  0.76809109
## sample estimates:
##       cor 
## 0.4398617</code></pre>
<p>Die Ergebnisse der Korrelationsanalyse zeigen einen Korrelationskoeffizienten von 0,44, was auf eine moderate positive Korrelation hinweist. Städte mit höherer Einwohnerzahl weisen tendenziell mehr Tage mit Überschreitungen des WHO-Grenzwerts für PM<sub>2,5</sub> auf. Allerdings ist der p-Wert von 0,08821 größer als das übliche Signifikanzniveau von 0,05, was darauf hindeutet, dass der beobachtete Zusammenhang statistisch nicht signifikant ist und mit Vorsicht interpretiert werden sollte. Die Konfidenzintervalle umfassen sowohl positive als auch negative Werte, was auf Unsicherheiten in der Korrelation hinweist.</p>
<p>In dieser Analyse werden die Tage ermittelt, an denen deutschlandweit hohe PM<sub>2,5</sub>-Werte gemessen wurden, die über dem EU-Grenzwert liegen.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="ergebnisse.html#cb76-1" tabindex="-1"></a><span class="co">#Ermitteln, welche Tage Deutschlandsweit hohe PM2.5 Daten haben</span></span>
<span id="cb76-2"><a href="ergebnisse.html#cb76-2" tabindex="-1"></a>Grenzwertüberschreitung_pro_Tag <span class="ot">&lt;-</span> midnight_interpoliert <span class="sc">%&gt;%</span></span>
<span id="cb76-3"><a href="ergebnisse.html#cb76-3" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb76-4"><a href="ergebnisse.html#cb76-4" tabindex="-1"></a>    <span class="at">ueber_EU =</span> value_midnight <span class="sc">&gt;</span> Grenzwert_EU</span>
<span id="cb76-5"><a href="ergebnisse.html#cb76-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb76-6"><a href="ergebnisse.html#cb76-6" tabindex="-1"></a>  <span class="fu">group_by</span>(date, location_name) <span class="sc">%&gt;%</span></span>
<span id="cb76-7"><a href="ergebnisse.html#cb76-7" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb76-8"><a href="ergebnisse.html#cb76-8" tabindex="-1"></a>    <span class="at">ueber_EU =</span> <span class="fu">max</span>(ueber_EU)</span>
<span id="cb76-9"><a href="ergebnisse.html#cb76-9" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb76-10"><a href="ergebnisse.html#cb76-10" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb76-11"><a href="ergebnisse.html#cb76-11" tabindex="-1"></a>  <span class="fu">group_by</span>(date) <span class="sc">%&gt;%</span></span>
<span id="cb76-12"><a href="ergebnisse.html#cb76-12" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb76-13"><a href="ergebnisse.html#cb76-13" tabindex="-1"></a>    <span class="at">Anzahl_Staedte_ueber_EU =</span> <span class="fu">sum</span>(ueber_EU, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb76-14"><a href="ergebnisse.html#cb76-14" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb76-15"><a href="ergebnisse.html#cb76-15" tabindex="-1"></a>  <span class="fu">filter</span>(Anzahl_Staedte_ueber_EU <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb76-16"><a href="ergebnisse.html#cb76-16" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Anzahl_Staedte_ueber_EU))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;date&#39;. You can override using the
## `.groups` argument.</code></pre>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="ergebnisse.html#cb78-1" tabindex="-1"></a><span class="co"># Ermittlung der Top-10-Tage mit den meisten Überschreitungen über dem EU-Grenzwert</span></span>
<span id="cb78-2"><a href="ergebnisse.html#cb78-2" tabindex="-1"></a>top_Ueberschreitungstage_EU <span class="ot">&lt;-</span> Grenzwertüberschreitung_pro_Tag <span class="sc">%&gt;%</span></span>
<span id="cb78-3"><a href="ergebnisse.html#cb78-3" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">10</span>)</span>
<span id="cb78-4"><a href="ergebnisse.html#cb78-4" tabindex="-1"></a></span>
<span id="cb78-5"><a href="ergebnisse.html#cb78-5" tabindex="-1"></a><span class="co"># Ergebnis anzeigen</span></span>
<span id="cb78-6"><a href="ergebnisse.html#cb78-6" tabindex="-1"></a><span class="fu">print</span>(top_Ueberschreitungstage_EU)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 2
##    date       Anzahl_Staedte_ueber_EU
##    &lt;date&gt;                       &lt;int&gt;
##  1 2023-12-06                       5
##  2 2023-06-21                       3
##  3 2023-12-07                       3
##  4 2023-12-09                       3
##  5 2023-05-23                       2
##  6 2023-06-18                       2
##  7 2023-12-01                       2
##  8 2023-12-05                       2
##  9 2023-05-01                       1
## 10 2023-05-02                       1</code></pre>
<p>Am 6. Dezember 2023 lagen in fünf Städten die PM<sub>2,5</sub>-Werte über dem EU-Grenzwert. Möglicherweise war ein landesweiter Streik der Deutschen Bahn dafür verantwortlich. Weitere hohe Überschreitungen gab es am 21. Juni, 7. Dezember und 9. Dezember 2023, jeweils mit drei Städten über dem Grenzwert. Diese Daten verdeutlichen spezifische Tage, an denen die Luftqualität in mehreren deutschen Städten besonders schlecht war.</p>
</div>
<div id="detailanalyse" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Detailanalyse<a href="ergebnisse.html#detailanalyse" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Da Rostock aufgrund seiner hohen Anzahl an Überschreitungen des EU-Grenzwerts und der allgemein hohen Messwerte auffällt, wird die Stadt genauer betrachtet. Hierfür werden die Daten der Realnutzungskartierung der Stadt Rostock verwendet. Es wird ein 200 Meter Puffer um die Messstation erstellt.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="ergebnisse.html#cb80-1" tabindex="-1"></a><span class="co"># Flächennutzungsdaten laden und vorbereiten</span></span>
<span id="cb80-2"><a href="ergebnisse.html#cb80-2" tabindex="-1"></a>Rostock_flächen <span class="ot">&lt;-</span> <span class="fu">st_read</span>(<span class="st">&quot;C:/Users/Patti/Documents/Studium/Master Uni Freiburg/WS 23- 24/Geodatenverabreitung/Projekt neu/Rostock.gml&quot;</span>)</span>
<span id="cb80-3"><a href="ergebnisse.html#cb80-3" tabindex="-1"></a></span>
<span id="cb80-4"><a href="ergebnisse.html#cb80-4" tabindex="-1"></a><span class="co"># Karte anzeigen</span></span>
<span id="cb80-5"><a href="ergebnisse.html#cb80-5" tabindex="-1"></a><span class="fu">leaflet</span>(<span class="at">data =</span> Rostock_flächen) <span class="sc">%&gt;%</span></span>
<span id="cb80-6"><a href="ergebnisse.html#cb80-6" tabindex="-1"></a>  <span class="fu">addProviderTiles</span>(providers<span class="sc">$</span>OpenStreetMap) <span class="sc">%&gt;%</span></span>
<span id="cb80-7"><a href="ergebnisse.html#cb80-7" tabindex="-1"></a>  <span class="fu">addPolygons</span>(<span class="at">fillColor =</span> <span class="sc">~</span><span class="fu">colorFactor</span>(<span class="at">palette =</span> <span class="fu">rainbow</span>(<span class="fu">length</span>(<span class="fu">unique</span>(Rostock_flächen<span class="sc">$</span>flaechennutzung_name))), </span>
<span id="cb80-8"><a href="ergebnisse.html#cb80-8" tabindex="-1"></a>                                       <span class="at">domain =</span> Rostock_flächen<span class="sc">$</span>flaechennutzung_name)(Rostock_flächen<span class="sc">$</span>flaechennutzung_name),</span>
<span id="cb80-9"><a href="ergebnisse.html#cb80-9" tabindex="-1"></a>              <span class="at">fillOpacity =</span> <span class="fl">0.5</span>,</span>
<span id="cb80-10"><a href="ergebnisse.html#cb80-10" tabindex="-1"></a>              <span class="at">color =</span> <span class="st">&quot;black&quot;</span>,</span>
<span id="cb80-11"><a href="ergebnisse.html#cb80-11" tabindex="-1"></a>              <span class="at">weight =</span> <span class="dv">1</span>)</span>
<span id="cb80-12"><a href="ergebnisse.html#cb80-12" tabindex="-1"></a></span>
<span id="cb80-13"><a href="ergebnisse.html#cb80-13" tabindex="-1"></a><span class="co"># Puffer um Messstation erstellen</span></span>
<span id="cb80-14"><a href="ergebnisse.html#cb80-14" tabindex="-1"></a></span>
<span id="cb80-15"><a href="ergebnisse.html#cb80-15" tabindex="-1"></a>Rostock_punkt <span class="ot">&lt;-</span> <span class="fu">st_as_sf</span>(<span class="fu">data.frame</span>(<span class="at">lon =</span> <span class="fl">12.14199</span>, <span class="at">lat =</span> <span class="fl">54.09228</span>), </span>
<span id="cb80-16"><a href="ergebnisse.html#cb80-16" tabindex="-1"></a>                          <span class="at">coords =</span> <span class="fu">c</span>(<span class="st">&quot;lon&quot;</span>, <span class="st">&quot;lat&quot;</span>), <span class="at">crs =</span> <span class="fu">st_crs</span>(Rostock_flächen))</span>
<span id="cb80-17"><a href="ergebnisse.html#cb80-17" tabindex="-1"></a>Rostock_puffer <span class="ot">&lt;-</span> <span class="fu">st_buffer</span>(Rostock_punkt, <span class="at">dist =</span> <span class="dv">200</span>)</span></code></pre></div>
<p>Es wird überprüft, welche Flächennutzungen vorhanden sind, und in Prozent dargestellt.</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="ergebnisse.html#cb81-1" tabindex="-1"></a><span class="co"># Flächen und Prozentsätze berechnen</span></span>
<span id="cb81-2"><a href="ergebnisse.html#cb81-2" tabindex="-1"></a>nutzung_im_umkreis <span class="ot">&lt;-</span> <span class="fu">st_intersection</span>(Rostock_flächen, Rostock_puffer)</span>
<span id="cb81-3"><a href="ergebnisse.html#cb81-3" tabindex="-1"></a>nutzung_im_umkreis<span class="sc">$</span>Fläche_m2 <span class="ot">&lt;-</span> <span class="fu">st_area</span>(nutzung_im_umkreis)</span>
<span id="cb81-4"><a href="ergebnisse.html#cb81-4" tabindex="-1"></a></span>
<span id="cb81-5"><a href="ergebnisse.html#cb81-5" tabindex="-1"></a>gesamtfläche_puffer <span class="ot">&lt;-</span> <span class="fu">sum</span>(nutzung_im_umkreis<span class="sc">$</span>Fläche_m2)</span>
<span id="cb81-6"><a href="ergebnisse.html#cb81-6" tabindex="-1"></a>nutzung_mit_prozent <span class="ot">&lt;-</span> nutzung_im_umkreis <span class="sc">%&gt;%</span></span>
<span id="cb81-7"><a href="ergebnisse.html#cb81-7" tabindex="-1"></a>  <span class="fu">group_by</span>(flaechennutzung_name) <span class="sc">%&gt;%</span></span>
<span id="cb81-8"><a href="ergebnisse.html#cb81-8" tabindex="-1"></a>  <span class="fu">summarise</span>(Total_Fläche<span class="at">_m2 =</span> <span class="fu">sum</span>(Fläche_m2),</span>
<span id="cb81-9"><a href="ergebnisse.html#cb81-9" tabindex="-1"></a>            <span class="at">Prozentualer_Anteil =</span> (Total_Fläche_m2 <span class="sc">/</span> gesamtfläche_puffer) <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb81-10"><a href="ergebnisse.html#cb81-10" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Prozentualer_Anteil_Format =</span> <span class="fu">paste0</span>(<span class="fu">round</span>(Prozentualer_Anteil, <span class="dv">2</span>), <span class="st">&quot;%&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb81-11"><a href="ergebnisse.html#cb81-11" tabindex="-1"></a>  <span class="fu">select</span>(flaechennutzung_name, Total_Fläche_m2, Prozentualer_Anteil_Format)</span>
<span id="cb81-12"><a href="ergebnisse.html#cb81-12" tabindex="-1"></a></span>
<span id="cb81-13"><a href="ergebnisse.html#cb81-13" tabindex="-1"></a><span class="co"># Geometriespalte entfernen, um nur die gewünschten Spalten anzuzeigen</span></span>
<span id="cb81-14"><a href="ergebnisse.html#cb81-14" tabindex="-1"></a>nutzung_mit_prozent <span class="ot">&lt;-</span> <span class="fu">st_drop_geometry</span>(nutzung_mit_prozent)</span>
<span id="cb81-15"><a href="ergebnisse.html#cb81-15" tabindex="-1"></a></span>
<span id="cb81-16"><a href="ergebnisse.html#cb81-16" tabindex="-1"></a><span class="co"># Ergebnis anzeigen</span></span>
<span id="cb81-17"><a href="ergebnisse.html#cb81-17" tabindex="-1"></a><span class="fu">print</span>(nutzung_mit_prozent)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 3
##    flaechennutzung_name  Total_Fläche_m2 Prozentualer_Anteil_Format
##  * &lt;chr&gt;                           [m^2] &lt;chr&gt;                     
##  1 Graben &lt; 3 m                     46.1 0.04%                     
##  2 Grünanlage                    12939.  10.19%                    
##  3 Industrie und Gewerbe          9268.  7.3%                      
##  4 Küstengewässer                30321.  23.87%                    
##  5 Mischnutzung                   9967.  7.85%                     
##  6 Parkplatz (befestigt)          8620.  6.79%                     
##  7 Reihenhausbebauung            10192.  8.02%                     
##  8 Straße                        18126.  14.27%                    
##  9 Weg                           19106.  15.04%                    
## 10 geschlossene Bebauung          8436.  6.64%</code></pre>
<p>Die Analyse zeigt, dass innerhalb des 200-Meter-Puffers um die Messstation in Rostock die Küstengewässer mit 23,87% den größten Anteil der Fläche ausmachen, gefolgt von Wegen (15,04%) und Straßen (14,27%). Auch Grünanlagen sowie industrielle und gewerbliche Flächen nehmen einen bedeutenden Teil der Flächennutzung ein. Diese Daten deuten darauf hin, dass sich die Messstation in einem urbanen Raum befindet. Warum die PM<sub>2,5</sub>-Werte so hoch sind, lässt sich nicht erklären. Eine mögliche Erklärung für die hohen Werte könnte sein, dass der Hafen, von dem aus Fähren, Kreuzfahrtschiffe und Frachter abfahren, in der Nähe liegt.</p>
<p>Interaktive Darstellungen:</p>
<p>Im ersten Code wird eine Benutzeroberfläche für eine Shiny-Anwendung erstellt, die eine interaktive Karte (leafletOutput) und ein Plotly-Diagramm (plotlyOutput) enthält. Die Serverfunktion server1 generiert die Karte mit Markern für jede Stadt, basierend auf den Sommer- und Winterdaten. Beim Klicken auf einen Marker werden Zeitreihenwerte von PM<sub>2,5</sub> für Sommer- und Winterdaten der jeweiligen Stadt in einem Plotly-Diagramm dargestellt. Die Farbcodierung der Datenpunkte im Diagramm basiert auf den PM<sub>2,5</sub>-Konzentrationen.
Dabei kennzeichnen Grenzwerte
unterschiedliche Belastungsniveaus:
- Schwarz: PM<sub>2,5</sub>-Werte unter 5 µg/m³
- Orange: PM<sub>2,5</sub>-Werte zwischen 5 und 25 µg/m³
- Rot: PM<sub>2,5</sub>-Werte über 25 µg/m³.</p>
<p>Die Grenzwerte orientieren sich an den Vorgaben der EU (über 25 µg/m³) und der WHO (über 5 µg/m³).</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="ergebnisse.html#cb83-1" tabindex="-1"></a><span class="co">#Erstellung einer Karte die saisonalen Schwankungen der ausgewählten Städte anzeigen</span></span>
<span id="cb83-2"><a href="ergebnisse.html#cb83-2" tabindex="-1"></a></span>
<span id="cb83-3"><a href="ergebnisse.html#cb83-3" tabindex="-1"></a>TageswerteStadtUI <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb83-4"><a href="ergebnisse.html#cb83-4" tabindex="-1"></a>  <span class="fu">leafletOutput</span>(<span class="st">&quot;map1&quot;</span>),</span>
<span id="cb83-5"><a href="ergebnisse.html#cb83-5" tabindex="-1"></a>  <span class="fu">plotlyOutput</span>(<span class="st">&quot;plot1&quot;</span>)</span>
<span id="cb83-6"><a href="ergebnisse.html#cb83-6" tabindex="-1"></a>)</span>
<span id="cb83-7"><a href="ergebnisse.html#cb83-7" tabindex="-1"></a></span>
<span id="cb83-8"><a href="ergebnisse.html#cb83-8" tabindex="-1"></a>server1 <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output, session) {</span>
<span id="cb83-9"><a href="ergebnisse.html#cb83-9" tabindex="-1"></a>  output<span class="sc">$</span>map1 <span class="ot">&lt;-</span> <span class="fu">renderLeaflet</span>({  </span>
<span id="cb83-10"><a href="ergebnisse.html#cb83-10" tabindex="-1"></a>    map <span class="ot">&lt;-</span> <span class="fu">leaflet</span>(midnight_interpoliert) <span class="sc">%&gt;%</span></span>
<span id="cb83-11"><a href="ergebnisse.html#cb83-11" tabindex="-1"></a>      <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span></span>
<span id="cb83-12"><a href="ergebnisse.html#cb83-12" tabindex="-1"></a>      <span class="fu">addLegend</span>(</span>
<span id="cb83-13"><a href="ergebnisse.html#cb83-13" tabindex="-1"></a>        <span class="at">position =</span> <span class="st">&quot;bottomright&quot;</span>,</span>
<span id="cb83-14"><a href="ergebnisse.html#cb83-14" tabindex="-1"></a>        <span class="at">colors =</span> <span class="fu">c</span>(<span class="st">&quot;black&quot;</span>, <span class="st">&quot;#FFA500&quot;</span>, <span class="st">&quot;red&quot;</span>),</span>
<span id="cb83-15"><a href="ergebnisse.html#cb83-15" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;0-5 µg/m³&quot;</span>, <span class="st">&quot;5-25 µg/m³&quot;</span>, <span class="st">&quot;&gt;25 µg/m³&quot;</span>),</span>
<span id="cb83-16"><a href="ergebnisse.html#cb83-16" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;PM2.5 Werte&quot;</span></span>
<span id="cb83-17"><a href="ergebnisse.html#cb83-17" tabindex="-1"></a>      )</span>
<span id="cb83-18"><a href="ergebnisse.html#cb83-18" tabindex="-1"></a>    </span>
<span id="cb83-19"><a href="ergebnisse.html#cb83-19" tabindex="-1"></a>    städte <span class="ot">&lt;-</span> <span class="fu">unique</span>(midnight_interpoliert<span class="sc">$</span>location_name)</span>
<span id="cb83-20"><a href="ergebnisse.html#cb83-20" tabindex="-1"></a>    </span>
<span id="cb83-21"><a href="ergebnisse.html#cb83-21" tabindex="-1"></a>    <span class="cf">for</span> (stadt <span class="cf">in</span> städte) {</span>
<span id="cb83-22"><a href="ergebnisse.html#cb83-22" tabindex="-1"></a>      sommer_df <span class="ot">&lt;-</span> midnight_interpoliert <span class="sc">%&gt;%</span></span>
<span id="cb83-23"><a href="ergebnisse.html#cb83-23" tabindex="-1"></a>        <span class="fu">filter</span>(location_name <span class="sc">==</span> stadt, <span class="fu">month</span>(date) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>))</span>
<span id="cb83-24"><a href="ergebnisse.html#cb83-24" tabindex="-1"></a>      </span>
<span id="cb83-25"><a href="ergebnisse.html#cb83-25" tabindex="-1"></a>      lng_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(sommer_df<span class="sc">$</span>longitude, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb83-26"><a href="ergebnisse.html#cb83-26" tabindex="-1"></a>      lat_mean <span class="ot">&lt;-</span> <span class="fu">mean</span>(sommer_df<span class="sc">$</span>latitude, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb83-27"><a href="ergebnisse.html#cb83-27" tabindex="-1"></a>      </span>
<span id="cb83-28"><a href="ergebnisse.html#cb83-28" tabindex="-1"></a>      map <span class="ot">&lt;-</span> map <span class="sc">%&gt;%</span> <span class="fu">addCircleMarkers</span>(</span>
<span id="cb83-29"><a href="ergebnisse.html#cb83-29" tabindex="-1"></a>        <span class="at">lng =</span> lng_mean, </span>
<span id="cb83-30"><a href="ergebnisse.html#cb83-30" tabindex="-1"></a>        <span class="at">lat =</span> lat_mean,</span>
<span id="cb83-31"><a href="ergebnisse.html#cb83-31" tabindex="-1"></a>        <span class="at">layerId =</span> stadt,</span>
<span id="cb83-32"><a href="ergebnisse.html#cb83-32" tabindex="-1"></a>        <span class="at">popup =</span> stadt</span>
<span id="cb83-33"><a href="ergebnisse.html#cb83-33" tabindex="-1"></a>      )</span>
<span id="cb83-34"><a href="ergebnisse.html#cb83-34" tabindex="-1"></a>    }</span>
<span id="cb83-35"><a href="ergebnisse.html#cb83-35" tabindex="-1"></a>    </span>
<span id="cb83-36"><a href="ergebnisse.html#cb83-36" tabindex="-1"></a>    map</span>
<span id="cb83-37"><a href="ergebnisse.html#cb83-37" tabindex="-1"></a>  })</span>
<span id="cb83-38"><a href="ergebnisse.html#cb83-38" tabindex="-1"></a>  </span>
<span id="cb83-39"><a href="ergebnisse.html#cb83-39" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>map1_marker_click, {  </span>
<span id="cb83-40"><a href="ergebnisse.html#cb83-40" tabindex="-1"></a>    marker <span class="ot">&lt;-</span> input<span class="sc">$</span>map1_marker_click<span class="sc">$</span>id  </span>
<span id="cb83-41"><a href="ergebnisse.html#cb83-41" tabindex="-1"></a>    sommer_df <span class="ot">&lt;-</span> midnight_interpoliert <span class="sc">%&gt;%</span></span>
<span id="cb83-42"><a href="ergebnisse.html#cb83-42" tabindex="-1"></a>      <span class="fu">filter</span>(location_name <span class="sc">==</span> marker, <span class="fu">month</span>(date) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">6</span>))</span>
<span id="cb83-43"><a href="ergebnisse.html#cb83-43" tabindex="-1"></a>    winter_df <span class="ot">&lt;-</span> midnight_interpoliert <span class="sc">%&gt;%</span></span>
<span id="cb83-44"><a href="ergebnisse.html#cb83-44" tabindex="-1"></a>      <span class="fu">filter</span>(location_name <span class="sc">==</span> marker, <span class="fu">month</span>(date) <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">11</span>, <span class="dv">12</span>))</span>
<span id="cb83-45"><a href="ergebnisse.html#cb83-45" tabindex="-1"></a>    </span>
<span id="cb83-46"><a href="ergebnisse.html#cb83-46" tabindex="-1"></a>    city_data <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(sommer_df, winter_df) <span class="sc">%&gt;%</span></span>
<span id="cb83-47"><a href="ergebnisse.html#cb83-47" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">color =</span> <span class="fu">case_when</span>(</span>
<span id="cb83-48"><a href="ergebnisse.html#cb83-48" tabindex="-1"></a>        value_midnight <span class="sc">&gt;</span> <span class="dv">25</span> <span class="sc">~</span> <span class="st">&#39;red&#39;</span>,</span>
<span id="cb83-49"><a href="ergebnisse.html#cb83-49" tabindex="-1"></a>        value_midnight <span class="sc">&gt;</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">&#39;orange&#39;</span>,</span>
<span id="cb83-50"><a href="ergebnisse.html#cb83-50" tabindex="-1"></a>        <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">&#39;black&#39;</span></span>
<span id="cb83-51"><a href="ergebnisse.html#cb83-51" tabindex="-1"></a>      ))</span>
<span id="cb83-52"><a href="ergebnisse.html#cb83-52" tabindex="-1"></a>    </span>
<span id="cb83-53"><a href="ergebnisse.html#cb83-53" tabindex="-1"></a>    output<span class="sc">$</span>plot1 <span class="ot">&lt;-</span> <span class="fu">renderPlotly</span>({  </span>
<span id="cb83-54"><a href="ergebnisse.html#cb83-54" tabindex="-1"></a>      <span class="fu">plot_ly</span>(city_data, <span class="at">x =</span> <span class="sc">~</span>date, <span class="at">y =</span> <span class="sc">~</span>value_midnight, <span class="at">type =</span> <span class="st">&#39;scatter&#39;</span>, <span class="at">mode =</span> <span class="st">&#39;lines+markers&#39;</span>,</span>
<span id="cb83-55"><a href="ergebnisse.html#cb83-55" tabindex="-1"></a>              <span class="at">text =</span> <span class="sc">~</span><span class="fu">paste</span>(date, value_midnight, <span class="st">&quot;µg/m³&quot;</span>), <span class="at">hoverinfo =</span> <span class="st">&#39;text&#39;</span>,</span>
<span id="cb83-56"><a href="ergebnisse.html#cb83-56" tabindex="-1"></a>              <span class="at">marker =</span> <span class="fu">list</span>(<span class="at">size =</span> <span class="dv">5</span>, <span class="at">color =</span> <span class="sc">~</span>color)) <span class="sc">%&gt;%</span></span>
<span id="cb83-57"><a href="ergebnisse.html#cb83-57" tabindex="-1"></a>        <span class="fu">layout</span>(</span>
<span id="cb83-58"><a href="ergebnisse.html#cb83-58" tabindex="-1"></a>          <span class="at">title =</span> <span class="fu">paste</span>(<span class="st">&quot;Tägliche PM2.5-Werte in&quot;</span>, marker),</span>
<span id="cb83-59"><a href="ergebnisse.html#cb83-59" tabindex="-1"></a>          <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;Datum&quot;</span>),  </span>
<span id="cb83-60"><a href="ergebnisse.html#cb83-60" tabindex="-1"></a>          <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">&quot;PM2.5 (µg/m³)&quot;</span>)  </span>
<span id="cb83-61"><a href="ergebnisse.html#cb83-61" tabindex="-1"></a>        )</span>
<span id="cb83-62"><a href="ergebnisse.html#cb83-62" tabindex="-1"></a>    })</span>
<span id="cb83-63"><a href="ergebnisse.html#cb83-63" tabindex="-1"></a>  })</span>
<span id="cb83-64"><a href="ergebnisse.html#cb83-64" tabindex="-1"></a>}</span>
<span id="cb83-65"><a href="ergebnisse.html#cb83-65" tabindex="-1"></a></span>
<span id="cb83-66"><a href="ergebnisse.html#cb83-66" tabindex="-1"></a><span class="fu">shinyApp</span>(<span class="at">ui =</span> TageswerteStadtUI, <span class="at">server =</span> server1)</span></code></pre></div>
<p>Der zweite Abschnitt beschreibt die Erstellung einer interaktiven Karte in Shiny. Diese ermöglicht es Benutzern, ein Datum zwischen dem 01.05.2023 und 31.12.2023 auszuwählen und die PM<sub>2,5</sub>-Tageswerte der Städte auf der Karte anzuzeigen. Die Funktion get_color ordnet den PM<sub>2,5</sub>-Werten Farben zu, um unterschiedliche Konzentrationsbereiche visuell zu differenzieren. Die Funktion server2 rendert eine Leaflet-Karte, die die geographischen Grenzen Deutschlands abdeckt. Bei Auswahl eines Datums werden die PM<sub>2,5</sub>-Werte der Städte entsprechend ihrer geographischen Position und PM<sub>2,5</sub>-Konzentration angezeigt. Das Ziel der beiden Karten ist es, räumliche und zeitliche Muster in den PM<sub>2,5</sub>-Konzentrationen zu erkennen und die Auswirkungen saisonaler Schwankungen auf die Luftqualität in verschiedenen deutschen Städten zu analysieren.</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="ergebnisse.html#cb84-1" tabindex="-1"></a><span class="co"># Erstellung einer interaktiven Karte, die die täglichen PM2.5 Werte farblich anzeigen</span></span>
<span id="cb84-2"><a href="ergebnisse.html#cb84-2" tabindex="-1"></a></span>
<span id="cb84-3"><a href="ergebnisse.html#cb84-3" tabindex="-1"></a>InteraktiveKarte <span class="ot">&lt;-</span> <span class="fu">fluidPage</span>(</span>
<span id="cb84-4"><a href="ergebnisse.html#cb84-4" tabindex="-1"></a>  <span class="fu">titlePanel</span>(<span class="st">&quot;Interaktive Heatmap für PM2.5-Werte&quot;</span>),</span>
<span id="cb84-5"><a href="ergebnisse.html#cb84-5" tabindex="-1"></a>  <span class="fu">sidebarLayout</span>(</span>
<span id="cb84-6"><a href="ergebnisse.html#cb84-6" tabindex="-1"></a>    <span class="fu">sidebarPanel</span>(</span>
<span id="cb84-7"><a href="ergebnisse.html#cb84-7" tabindex="-1"></a>      <span class="fu">dateInput</span>(<span class="st">&quot;dateInput&quot;</span>, <span class="st">&quot;Datum wählen:&quot;</span>, </span>
<span id="cb84-8"><a href="ergebnisse.html#cb84-8" tabindex="-1"></a>                <span class="at">value =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2023-05-01&quot;</span>), </span>
<span id="cb84-9"><a href="ergebnisse.html#cb84-9" tabindex="-1"></a>                <span class="at">min =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2023-05-01&quot;</span>), </span>
<span id="cb84-10"><a href="ergebnisse.html#cb84-10" tabindex="-1"></a>                <span class="at">max =</span> <span class="fu">as.Date</span>(<span class="st">&quot;2023-12-31&quot;</span>))</span>
<span id="cb84-11"><a href="ergebnisse.html#cb84-11" tabindex="-1"></a>    ),</span>
<span id="cb84-12"><a href="ergebnisse.html#cb84-12" tabindex="-1"></a>    <span class="fu">mainPanel</span>(</span>
<span id="cb84-13"><a href="ergebnisse.html#cb84-13" tabindex="-1"></a>      <span class="fu">leafletOutput</span>(<span class="st">&quot;map&quot;</span>, <span class="at">width =</span> <span class="st">&quot;70%&quot;</span>, <span class="at">height =</span> <span class="st">&quot;800px&quot;</span>)</span>
<span id="cb84-14"><a href="ergebnisse.html#cb84-14" tabindex="-1"></a>    )</span>
<span id="cb84-15"><a href="ergebnisse.html#cb84-15" tabindex="-1"></a>  )</span>
<span id="cb84-16"><a href="ergebnisse.html#cb84-16" tabindex="-1"></a>)</span>
<span id="cb84-17"><a href="ergebnisse.html#cb84-17" tabindex="-1"></a></span>
<span id="cb84-18"><a href="ergebnisse.html#cb84-18" tabindex="-1"></a>get_color <span class="ot">&lt;-</span> <span class="cf">function</span>(value) {</span>
<span id="cb84-19"><a href="ergebnisse.html#cb84-19" tabindex="-1"></a>  <span class="cf">if</span> (value <span class="sc">&gt;</span> <span class="dv">25</span>) {</span>
<span id="cb84-20"><a href="ergebnisse.html#cb84-20" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;#000000&quot;</span>)  </span>
<span id="cb84-21"><a href="ergebnisse.html#cb84-21" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (value <span class="sc">&gt;</span> <span class="dv">20</span>) {</span>
<span id="cb84-22"><a href="ergebnisse.html#cb84-22" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;#FF0000&quot;</span>)  </span>
<span id="cb84-23"><a href="ergebnisse.html#cb84-23" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (value <span class="sc">&gt;</span> <span class="dv">15</span>) {</span>
<span id="cb84-24"><a href="ergebnisse.html#cb84-24" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;#FF4500&quot;</span>)  </span>
<span id="cb84-25"><a href="ergebnisse.html#cb84-25" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (value <span class="sc">&gt;</span> <span class="dv">10</span>) {</span>
<span id="cb84-26"><a href="ergebnisse.html#cb84-26" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;#FFA500&quot;</span>)  </span>
<span id="cb84-27"><a href="ergebnisse.html#cb84-27" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (value <span class="sc">&gt;</span> <span class="dv">5</span>) {</span>
<span id="cb84-28"><a href="ergebnisse.html#cb84-28" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;#FFFF00&quot;</span>)  </span>
<span id="cb84-29"><a href="ergebnisse.html#cb84-29" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb84-30"><a href="ergebnisse.html#cb84-30" tabindex="-1"></a>    <span class="fu">return</span>(<span class="st">&quot;#FFFFE0&quot;</span>)  </span>
<span id="cb84-31"><a href="ergebnisse.html#cb84-31" tabindex="-1"></a>  }</span>
<span id="cb84-32"><a href="ergebnisse.html#cb84-32" tabindex="-1"></a>}</span>
<span id="cb84-33"><a href="ergebnisse.html#cb84-33" tabindex="-1"></a></span>
<span id="cb84-34"><a href="ergebnisse.html#cb84-34" tabindex="-1"></a>server2 <span class="ot">&lt;-</span> <span class="cf">function</span>(input, output) {</span>
<span id="cb84-35"><a href="ergebnisse.html#cb84-35" tabindex="-1"></a>  output<span class="sc">$</span>map <span class="ot">&lt;-</span> <span class="fu">renderLeaflet</span>({</span>
<span id="cb84-36"><a href="ergebnisse.html#cb84-36" tabindex="-1"></a>    <span class="fu">leaflet</span>() <span class="sc">%&gt;%</span> </span>
<span id="cb84-37"><a href="ergebnisse.html#cb84-37" tabindex="-1"></a>      <span class="fu">addTiles</span>() <span class="sc">%&gt;%</span></span>
<span id="cb84-38"><a href="ergebnisse.html#cb84-38" tabindex="-1"></a>      <span class="fu">fitBounds</span>(</span>
<span id="cb84-39"><a href="ergebnisse.html#cb84-39" tabindex="-1"></a>        <span class="at">lng1 =</span> <span class="fl">5.87</span>, <span class="at">lat1 =</span> <span class="dv">47</span>, </span>
<span id="cb84-40"><a href="ergebnisse.html#cb84-40" tabindex="-1"></a>        <span class="at">lng2 =</span> <span class="fl">15.04</span>, <span class="at">lat2 =</span> <span class="dv">55</span>  </span>
<span id="cb84-41"><a href="ergebnisse.html#cb84-41" tabindex="-1"></a>      ) <span class="sc">%&gt;%</span></span>
<span id="cb84-42"><a href="ergebnisse.html#cb84-42" tabindex="-1"></a>      <span class="fu">addLegend</span>(</span>
<span id="cb84-43"><a href="ergebnisse.html#cb84-43" tabindex="-1"></a>        <span class="at">position =</span> <span class="st">&quot;bottomright&quot;</span>,</span>
<span id="cb84-44"><a href="ergebnisse.html#cb84-44" tabindex="-1"></a>        <span class="at">colors =</span> <span class="fu">c</span>(<span class="st">&quot;#FFFFE0&quot;</span>, <span class="st">&quot;#FFFF00&quot;</span>, <span class="st">&quot;#FFA500&quot;</span>, <span class="st">&quot;#FF4500&quot;</span>, <span class="st">&quot;#FF0000&quot;</span>, <span class="st">&quot;#000000&quot;</span>),</span>
<span id="cb84-45"><a href="ergebnisse.html#cb84-45" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;0-5 µg/m³&quot;</span>, <span class="st">&quot;5-10 µg/m³&quot;</span>, <span class="st">&quot;10-15 µg/m³&quot;</span>, <span class="st">&quot;15-20 µg/m³&quot;</span>, <span class="st">&quot;20-25 µg/m³&quot;</span>, <span class="st">&quot;&gt;25 µg/m³&quot;</span>),</span>
<span id="cb84-46"><a href="ergebnisse.html#cb84-46" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;PM2.5 Werte&quot;</span></span>
<span id="cb84-47"><a href="ergebnisse.html#cb84-47" tabindex="-1"></a>      )</span>
<span id="cb84-48"><a href="ergebnisse.html#cb84-48" tabindex="-1"></a>  })</span>
<span id="cb84-49"><a href="ergebnisse.html#cb84-49" tabindex="-1"></a>  </span>
<span id="cb84-50"><a href="ergebnisse.html#cb84-50" tabindex="-1"></a>  <span class="fu">observeEvent</span>(input<span class="sc">$</span>dateInput, {</span>
<span id="cb84-51"><a href="ergebnisse.html#cb84-51" tabindex="-1"></a>    filtered_data <span class="ot">&lt;-</span> midnight_interpoliert <span class="sc">%&gt;%</span></span>
<span id="cb84-52"><a href="ergebnisse.html#cb84-52" tabindex="-1"></a>      <span class="fu">filter</span>(date <span class="sc">==</span> input<span class="sc">$</span>dateInput) <span class="sc">%&gt;%</span></span>
<span id="cb84-53"><a href="ergebnisse.html#cb84-53" tabindex="-1"></a>      <span class="fu">mutate</span>(<span class="at">value_midnight =</span> <span class="fu">as.numeric</span>(value_midnight))</span>
<span id="cb84-54"><a href="ergebnisse.html#cb84-54" tabindex="-1"></a>    </span>
<span id="cb84-55"><a href="ergebnisse.html#cb84-55" tabindex="-1"></a>    <span class="fu">leafletProxy</span>(<span class="st">&quot;map&quot;</span>, <span class="at">data =</span> filtered_data) <span class="sc">%&gt;%</span></span>
<span id="cb84-56"><a href="ergebnisse.html#cb84-56" tabindex="-1"></a>      <span class="fu">clearMarkers</span>() <span class="sc">%&gt;%</span></span>
<span id="cb84-57"><a href="ergebnisse.html#cb84-57" tabindex="-1"></a>      <span class="fu">addCircles</span>(</span>
<span id="cb84-58"><a href="ergebnisse.html#cb84-58" tabindex="-1"></a>        <span class="sc">~</span>longitude, <span class="sc">~</span>latitude,</span>
<span id="cb84-59"><a href="ergebnisse.html#cb84-59" tabindex="-1"></a>        <span class="at">radius =</span> <span class="dv">10</span> <span class="sc">*</span> <span class="dv">1000</span>,</span>
<span id="cb84-60"><a href="ergebnisse.html#cb84-60" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">&quot;#000000&quot;</span>,  </span>
<span id="cb84-61"><a href="ergebnisse.html#cb84-61" tabindex="-1"></a>        <span class="at">fillColor =</span> <span class="sc">~</span><span class="fu">sapply</span>(value_midnight, get_color),</span>
<span id="cb84-62"><a href="ergebnisse.html#cb84-62" tabindex="-1"></a>        <span class="at">fillOpacity =</span> <span class="fl">0.8</span>,</span>
<span id="cb84-63"><a href="ergebnisse.html#cb84-63" tabindex="-1"></a>        <span class="at">weight =</span> <span class="dv">1</span>,  </span>
<span id="cb84-64"><a href="ergebnisse.html#cb84-64" tabindex="-1"></a>        <span class="at">popup =</span> <span class="sc">~</span><span class="fu">paste</span>(<span class="st">&quot;Stadt: &quot;</span>, location_name, <span class="st">&quot;&lt;br&gt;PM2.5 Wert: &quot;</span>, value_midnight, <span class="st">&quot;µg/m³&quot;</span>)</span>
<span id="cb84-65"><a href="ergebnisse.html#cb84-65" tabindex="-1"></a>      )</span>
<span id="cb84-66"><a href="ergebnisse.html#cb84-66" tabindex="-1"></a>  })</span>
<span id="cb84-67"><a href="ergebnisse.html#cb84-67" tabindex="-1"></a>}</span>
<span id="cb84-68"><a href="ergebnisse.html#cb84-68" tabindex="-1"></a></span>
<span id="cb84-69"><a href="ergebnisse.html#cb84-69" tabindex="-1"></a></span>
<span id="cb84-70"><a href="ergebnisse.html#cb84-70" tabindex="-1"></a><span class="fu">shinyApp</span>(InteraktiveKarte, server2)</span></code></pre></div>

</div>
</div>
<h3> References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-frankeAssessingWHO2021Air2023" class="csl-entry">
Franke, Philipp, Anne Caroline Lange, und Astrid Kiendler-Scharr. 2023. <span>„Assessing <span>WHO2021</span> Air Quality Guideline Levels in <span>Europe</span>: <span>Population</span> Exposure and <span>PM2</span>.5 Reduction Potential“</span>. <a href="https://doi.org/10.5194/egusphere-egu23-15917">https://doi.org/10.5194/egusphere-egu23-15917</a>.
</div>
<div id="ref-Richtlinie2008502008" class="csl-entry">
<span>„<span>Richtlinie 2008/50/EG des Europ<span>ä</span>ischen Parlaments und des Rates vom 21. Mai 2008 <span>ü</span>ber Luftqualit<span>ä</span>t und saubere Luft f<span>ü</span>r Europa</span>“</span>. 2008.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="analyse.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="diskussion-und-reflektion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/USERNAME/REPO/edit/BRANCH/Ergebnisse.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.pdf", "_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
